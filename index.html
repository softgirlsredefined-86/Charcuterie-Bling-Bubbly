<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Charcuterie, Bling & Bubbly ‚Äî RSVP</title>
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='90'%3E%E2%9C%A8%3C/text%3E%3C/svg%3E">
<style>
  :root{
    --blush:#F9E4E8;
    --beige:#F4E1C1;
    --gold:#D4AF37;
    --accent:#B0E0E6;
    --charcoal:#3E3E3E;
    --card-bg: rgba(255,255,255,0.94);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family: 'Poppins', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:linear-gradient(180deg,var(--blush), #F6F8FB);}
  body{color:var(--charcoal);-webkit-font-smoothing:antialiased;overflow-x:hidden;position:relative;}

  /* Sparkle overlay (constant motion) */
  .sparkle-layer{position:fixed;inset:0;pointer-events:none;z-index:0;background:
    radial-gradient(rgba(212,175,55,0.06) 1px, transparent 1px),
    radial-gradient(rgba(255,255,255,0.03) 1px, transparent 1px);
    background-size: 28px 28px, 60px 60px;opacity:0.95;mix-blend-mode:screen;filter:blur(0.6px)
  }
  /* moving tiny sparkles overlay (animation) */
  .sparkle-layer::after{
    content:"";position:absolute;inset:-20% -40% -20% -40%;
    background:
      radial-gradient(rgba(255,255,255,0.15) 2px, transparent 2px),
      radial-gradient(rgba(212,175,55,0.08) 2px, transparent 2px);
    background-size: 120px 120px, 200px 200px;
    animation: floatSparkles 14s linear infinite;
    opacity:0.6;mix-blend-mode:soft-light;
  }
  @keyframes floatSparkles { 0%{transform:translateX(-20%) translateY(0)} 50%{transform:translateX(20%) translateY(6%)} 100%{transform:translateX(-20%) translateY(0)} }

  /* Loader shimmer */
  #loader{position:fixed;inset:0;z-index:9999;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg, rgba(249,228,232,0.95), rgba(240,248,255,0.95));font-size:1.2rem;color:var(--charcoal);transition:opacity .6s ease,visibility .6s ease}
  /* Header */
  header{position:relative;z-index:2;text-align:center;padding:34px 18px 8px;opacity:0;animation:fadeIn 1.1s ease forwards 0.7s}
  header img{width:170px;border-radius:14px;box-shadow:0 12px 40px rgba(183,110,121,0.12);display:block;margin:0 auto}
  h1{font-family:"Playfair Display", serif;color:#b76e79;margin:14px 0 4px;font-size:2.05rem}
  h2{margin:0;font-weight:400;color:#6aa6c2;font-size:1.02rem}
  .tagline{margin-top:8px;font-size:.95rem;color:#666}

  /* Page container/card */
  .wrap{position:relative;z-index:2;max-width:840px;margin:26px auto;padding:16px}
  .card{background:var(--card-bg);border-radius:18px;padding:28px 28px;box-shadow:0 10px 40px rgba(40,30,40,0.06);transform:translateY(20px);opacity:0;animation:slideUp .9s ease forwards 1s}
  @keyframes fadeIn{from{opacity:0}to{opacity:1}} @keyframes slideUp{from{transform:translateY(18px);opacity:0}to{transform:translateY(0);opacity:1}}

  /* Meta chips */
  .meta{display:flex;flex-wrap:wrap;gap:12px;justify-content:center;margin-bottom:14px}
  .meta .chip{background:linear-gradient(180deg,rgba(255,255,255,0.98),rgba(255,255,255,0.9));padding:8px 12px;border-radius:12px;font-weight:700;border:1px solid rgba(0,0,0,0.04);color:#444}

  /* Form / layout */
  .intro{color:#444;text-align:center;margin-top:6px}
  form{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-top:18px}
  label{font-size:.9rem;font-weight:700;color:#444;margin-bottom:6px;display:block}
  input,select,textarea{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);font-size:.95rem;background:#fff;box-shadow:inset 0 1px 0 rgba(255,255,255,0.6)}
  textarea{min-height:110px;grid-column:1/3;resize:vertical}
  .full{grid-column:1/3}
  .actions{display:flex;gap:12px;align-items:center;flex-wrap:wrap;grid-column:1/3;margin-top:8px}
  .btn{display:inline-flex;align-items:center;gap:10px;border:none;padding:12px 18px;border-radius:26px;cursor:pointer;color:#fff;font-weight:700;font-size:1rem;background:linear-gradient(90deg,#ffb6c1,#b0e0e6);box-shadow:0 10px 30px rgba(176,224,230,0.15);transition:transform .25s ease,box-shadow .25s ease}
  .btn:hover{transform:translateY(-3px);box-shadow:0 18px 40px rgba(212,175,55,0.14)}
  .btn.ghost{background:transparent;color:var(--charcoal);border:1px solid rgba(0,0,0,0.06);box-shadow:none}
  .btn.pay{background:linear-gradient(90deg,#b0e0e6,#f4b1c7)}

  .note{font-size:.88rem;color:#666;margin-top:6px}

  /* Thank you */
  #thankyou{display:none;padding:16px;border-radius:12px;background:linear-gradient(90deg, rgba(240,248,255,0.95), rgba(249,228,232,0.95));text-align:center;font-weight:700;color:#b76e79;margin-top:12px}

  /* Share floating */
  .share-floating{position:fixed;left:18px;bottom:22px;background:linear-gradient(180deg, rgba(255,255,255,0.96), rgba(255,255,255,0.9));padding:8px;border-radius:12px;box-shadow:0 12px 35px rgba(0,0,0,0.08);display:flex;gap:8px;align-items:center;z-index:999;opacity:0;animation:fadeIn .8s ease forwards 1.4s}
  .share-floating button{background:transparent;border:none;font-size:1.15rem;padding:6px 8px;border-radius:8px;cursor:pointer;color:#b76e79}
  .share-floating button:hover{background:rgba(183,110,121,0.06);color:#6aa6c2}

  /* Back to top */
  #backTop{position:fixed;right:18px;bottom:22px;width:46px;height:46px;border-radius:50%;border:none;background:linear-gradient(90deg,#f4b1c7,#b0e0e6);color:#fff;font-size:20px;cursor:pointer;box-shadow:0 12px 35px rgba(0,0,0,0.12);display:none;z-index:999}
  #backTop:hover{transform:scale(1.06)}

  /* Audio control */
  .audio-control{position:fixed;left:18px;top:18px;z-index:9999}
  .audio-control button{background:linear-gradient(90deg,#f4b1c7,#b0e0e6);border:none;padding:10px;border-radius:12px;color:#fff;font-weight:700;cursor:pointer;box-shadow:0 8px 20px rgba(0,0,0,0.12)}

  /* footer */
  footer{padding:28px 12px;text-align:center;color:#6a6a6a;z-index:2;position:relative}

  @media (max-width:740px){form{grid-template-columns:1fr} header img{width:140px} .wrap{padding:12px}}
</style>
</head>
<body>
  <div id="loader">‚ú® Sip. Sparkle. Savor. ‚ú®</div>
  <div class="sparkle-layer" aria-hidden="true"></div>

  <!-- Audio control (muted by default) -->
  <div class="audio-control" aria-hidden="false">
    <button id="audioToggle" title="Toggle background music">üé∂ Play Music</button>
    <!-- Upload background-music.mp3 to repo root if you want audio to play -->
    <audio id="bgAudio" loop preload="auto" src="background-music.mp3"></audio>
  </div>

  <header>
    <img src="Untitled design.png" alt="Bling & Mingle Logo">
    <h1>Charcuterie, Bling & Bubbly</h1>
    <h2>Sip. Sparkle. Savor.</h2>
    <div class="tagline">Because every bottle ‚Äî and board ‚Äî deserves a little bling.</div>
  </header>

  <main class="wrap" role="main">
    <section class="card" aria-labelledby="eventTitle">
      <h3 id="eventTitle" style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden">Event details</h3>

      <div class="meta" aria-hidden="true">
        <div class="chip">üìÖ December 6, 2025</div>
        <div class="chip">‚è∞ 4:00 PM ‚Äì 7:00 PM</div>
        <div class="chip">üìç Downtown Jacksonville</div>
        <div class="chip">üíµ $25 ‚Ä¢ 18+</div>
      </div>

      <p class="intro" style="text-align:center;color:#555">
        Join us for an elegant, creative evening ‚Äî bedazzle a mini wine bottle, craft a mini charcuterie board, sip bubbly, and mingle. Exact address is shared after RSVP.
      </p>

      <!-- calendar + pay -->
      <div style="text-align:center;margin-top:14px;">
        <button class="btn" id="addCalendarBtn">üìÖ Add to Calendar</button>
        <a href="https://softgirlsredefined.ticketspice.com/charcuterie-bling-bubbly" target="_blank" rel="noopener">
          <button class="btn pay">üí≥ Pay Now (TicketSpice)</button>
        </a>
      </div>

      <!-- RSVP form (restored full layout) -->
      <div class="form-section" style="margin-top:22px">
        <h3 style="text-align:center;margin:0 0 8px;color:#6a6a6a">Reserve Your Spot</h3>

        <form id="rsvpForm" action="https://formspree.io/f/xanpkjoy" method="POST" autocomplete="on" novalidate>
          <label for="fullname">Full Name</label>
          <input id="fullname" name="Full Name" type="text" required>

          <label for="email">Email Address</label>
          <input id="email" name="_replyto" type="email" required>

          <label for="phone">Phone Number</label>
          <input id="phone" name="Phone" type="tel" placeholder="Optional">

          <label for="age">Are you 18 or older?</label>
          <select id="age" name="Age Confirmation" required>
            <option value="">Select one</option>
            <option value="Yes">Yes</option>
          </select>

          <label for="bringing">Will you be bringing a guest?</label>
          <select id="bringing" name="Bringing Guest" required>
            <option value="">Select one</option>
            <option value="No">No</option>
            <option value="Yes">Yes</option>
          </select>

          <label for="guestname" class="full">Guest's Full Name (if bringing)</label>
          <input id="guestname" name="Guest Name" class="full" type="text" placeholder="Optional">

          <label for="allergies" class="full">Food allergies or dietary preferences</label>
          <textarea id="allergies" name="Allergies / Preferences" class="full" placeholder="Let us know if you have any dietary needs"></textarea>

          <label for="paymentOpt">Payment Confirmation</label>
          <select id="paymentOpt" name="Payment Option" required>
            <option value="">Select one</option>
            <option value="RSVP Now, Pay Later">RSVP Now, Pay Later (2 weeks to pay)</option>
            <option value="Pay Now via TicketSpice">Pay Now via TicketSpice</option>
          </select>

          <label for="notes" class="full">Additional Notes or Requests</label>
          <textarea id="notes" name="Notes" class="full" placeholder="Optional"></textarea>

          <input type="hidden" name="event" value="Charcuterie, Bling & Bubbly - Dec 6 2025">
          <input type="hidden" name="pageUrl" value="">

          <div class="actions">
            <button type="submit" class="btn">Submit RSVP</button>
            <button type="button" class="btn ghost" id="saveCopyBtn">Save a Copy</button>
            <div class="note">You may choose "RSVP Now, Pay Later" (2 weeks to pay) ‚Äî or click Pay Now to complete payment immediately.</div>
          </div>

          <div id="thankyou" aria-live="polite">üíñ Thank you for RSVPing! We can‚Äôt wait to see you sparkle on December 6th! üíñ</div>
        </form>
      </div>
    </section>
  </main>

  <!-- share floating -->
  <div class="share-floating" aria-label="Share this event">
    <button id="shareFB" title="Share on Facebook">üìò</button>
    <button id="shareX" title="Share on X">üïäÔ∏è</button>
    <button id="copyLink" title="Copy link">üîó</button>
    <button id="emailInvite" title="Send email invite">‚úâÔ∏è</button>
  </div>

  <!-- back to top -->
  <button id="backTop" aria-label="Back to top">‚Üë</button>

  <footer>
    Designed by Bling & Mingle Entertainment ‚ú® ‚Äî Contact: Softgirlsredefined@gmail.com
  </footer>

<script>
/* ===== Loader hide ===== */
window.addEventListener('load', () => {
  const loader = document.getElementById('loader');
  setTimeout(()=> { loader.style.opacity='0'; loader.style.visibility='hidden'; }, 700);
});

/* ===== Formspree submit ===== */
const form = document.getElementById('rsvpForm');
form.addEventListener('submit', async (e) => {
  e.preventDefault();
  // add page URL
  form.querySelector('input[name="pageUrl"]').value = window.location.href;
  const data = new FormData(form);
  try {
    const res = await fetch(form.action, { method: 'POST', body: data, headers: {'Accept':'application/json'} });
    if (res.ok) {
      form.reset();
      form.style.display = 'none';
      document.getElementById('thankyou').style.display = 'block';
    } else {
      alert('Submission error ‚Äî please try again or email Softgirlsredefined@gmail.com');
    }
  } catch (err) {
    alert('Network error ‚Äî please try again.');
  }
});

/* ===== Save a copy (download text file) ===== */
document.getElementById('saveCopyBtn').addEventListener('click', () => {
  const fields = {
    "Full Name": document.getElementById('fullname').value || '',
    "Email": document.getElementById('email').value || '',
    "Phone": document.getElementById('phone').value || '',
    "Age": document.getElementById('age').value || '',
    "Bringing Guest": document.getElementById('bringing').value || '',
    "Guest Name": document.getElementById('guestname').value || '',
    "Allergies": document.getElementById('allergies').value || '',
    "Payment Option": document.getElementById('paymentOpt').value || '',
    "Notes": document.getElementById('notes').value || ''
  };
  let content = 'Charcuterie, Bling & Bubbly ‚Äî RSVP Copy\\n\\n';
  for (const k in fields) content += `${k}: ${fields[k]}\\n`;
  const blob = new Blob([content], {type:'text/plain'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = 'RSVP_Charcuterie_Bling_Bubbly.txt'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
});

/* ===== Share buttons ===== */
const pageUrl = window.location.href;
document.getElementById('copyLink').addEventListener('click', async () => {
  try { await navigator.clipboard.writeText(pageUrl); alert('Link copied!'); } catch { prompt('Copy this link:', pageUrl); }
});
document.getElementById('shareFB').addEventListener('click', () => {
  window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(pageUrl)}`, '_blank');
});
document.getElementById('shareX').addEventListener('click', () => {
  window.open(`https://twitter.com/intent/tweet?url=${encodeURIComponent(pageUrl)}&text=${encodeURIComponent('Join me for Charcuterie, Bling & Bubbly!')}`, '_blank');
});
document.getElementById('emailInvite').addEventListener('click', () => {
  const subject = encodeURIComponent('Join me: Charcuterie, Bling & Bubbly');
  const body = encodeURIComponent(`I'd love for you to join me at Charcuterie, Bling & Bubbly! RSVP here: ${pageUrl}`);
  window.location.href = `mailto:?subject=${subject}&body=${body}`;
});

/* ===== Back to top ===== */
const backTop = document.getElementById('backTop');
window.addEventListener('scroll', () => {
  if (window.scrollY > 220) backTop.style.display = 'block';
  else backTop.style.display = 'none';
});
backTop.addEventListener('click', () => window.scrollTo({top:0,behavior:'smooth'}));

/* ===== Add to calendar (Google + ICS) ===== */
document.getElementById('addCalendarBtn').addEventListener('click', () => {
  // modal
  const popup = document.createElement('div');
  popup.style.position='fixed'; popup.style.left='50%'; popup.style.top='50%';
  popup.style.transform='translate(-50%,-50%)'; popup.style.zIndex='9999';
  popup.style.background='white'; popup.style.padding='18px'; popup.style.borderRadius='12px';
  popup.style.boxShadow='0 16px 48px rgba(0,0,0,0.18)';
  popup.innerHTML = `
    <div style="text-align:center;font-weight:800;margin-bottom:12px">Add to Calendar</div>
    <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap">
      <a id="googleLink" target="_blank"><button class="btn">Google</button></a>
      <button class="btn ghost" id="downloadICS">Apple / Outlook</button>
      <button class="btn ghost" id="closeCal">Close</button>
    </div>
  `;
  document.body.appendChild(popup);

  const start = '20251206T160000';
  const end = '20251206T190000';
  const title = 'Charcuterie, Bling & Bubbly';
  const details = 'Sip, sparkle, and savor your evening as you bedazzle your mini wine bottles and craft your own charcuterie board!';
  const location = 'Downtown Jacksonville - Address shared upon RSVP';
  const google = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(title)}&dates=${encodeURIComponent(start)}/${encodeURIComponent(end)}&details=${encodeURIComponent(details)}&location=${encodeURIComponent(location)}`;
  document.getElementById('googleLink').href = google;

  document.getElementById('downloadICS').addEventListener('click', () => {
    const ics = [
      'BEGIN:VCALENDAR','VERSION:2.0','PRODID:-//Bling & Mingle//Charcuterie Bling Bubbly//EN',
      'BEGIN:VEVENT',`DTSTART:${start}`,`DTEND:${end}`,`SUMMARY:${title}`,`DESCRIPTION:${details}`,`LOCATION:${location}`,'END:VEVENT','END:VCALENDAR'
    ];
    const blob = new Blob([ics.join('\\r\\n')], {type:'text/calendar'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = 'Charcuterie_Bling_Bubbly.ics'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
  });

  document.getElementById('closeCal').addEventListener('click', ()=> popup.remove());
});

/* ===== Audio toggle ===== */
const audio = document.getElementById('bgAudio');
const audioBtn = document.getElementById('audioToggle');
let audioPlaying = false;
audioBtn.addEventListener('click', async () => {
  // if audio file is missing, gracefully warn
  if (!audio.src || audio.src.indexOf('background-music.mp3') === -1) {
    alert('No background audio file found. To enable music, upload "background-music.mp3" to your repo root.');
    return;
  }
  if (!audioPlaying) {
    try { await audio.play(); audioBtn.textContent='üîà Pause Music'; audioPlaying = true; }
    catch(e){ alert('Autoplay blocked ‚Äî tap the button again to start audio.');}
  } else {
    audio.pause(); audioBtn.textContent='üé∂ Play Music'; audioPlaying = false;
  }
});

/* ===== small accessibility: Escape removes modals ===== */
document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { const pop = document.querySelector('div[style*="position:fixed"][role!=navigation]'); if(pop) pop.remove(); } });

</script>
</body>
</html>
